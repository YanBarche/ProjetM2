{% extends "base.html" %}
{% block content %}
<div style="background-color : white">
    <h1 class="d-flex justify-content-center" style="color: black;">Comparison between {{ country.name }} and {{ country2.name }}</h1>
    <br/>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js'></script>

    <canvas id="myChart" width="1000%" height="400%"></canvas>
    <script>
    var canvas = document.getElementById('myChart');
var data = {
    labels: [ 
      {% for item in labels %}
          "{{ item }}",
      {% endfor %}
    ],
    datasets: [
        {
            label: "{{ country.name }}",
            fill:false,
            lineTension: 0.1,
            borderColor: "rgba(75,192,192,1)",
            borderCapStyle: 'butt',
            borderDash: [],
            borderDashOffset: 0.0,
            borderJoinStyle: 'miter',
            pointBorderColor: "rgba(75,192,192,1)",
            pointBackgroundColor: "#fff",
            pointBorderWidth: 1,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: "rgba(75,192,192,1)",
            pointHoverBorderColor: "rgba(220,220,220,1)",
            pointHoverBorderWidth: 2,
            pointRadius: 5,
            pointHitRadius: 10,
            data: [ {% for item in country.values_dead %}
              {{ item }},
            {% endfor %}
          ],
        },
        {
            label: "{{ country2.name }}",
            fill:false,
            lineTension: 0.1,
            borderColor: "red",
            borderCapStyle: 'butt',
            borderDash: [],
            borderDashOffset: 0.0,
            borderJoinStyle: 'miter',
            pointBorderColor: "black",
            pointBackgroundColor: "red",
            pointBorderWidth: 1,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: "rgba(75,192,192,1)",
            pointHoverBorderColor: "rgba(220,220,220,1)",
            pointHoverBorderWidth: 2,
            pointRadius: 5,
            pointHitRadius: 10,
            data: [ {% for item in country2.values_dead %}
              {{ item }},
            {% endfor %}
          ],
        }
    ]
};

var option = {
	showLines: true,
  animation:false
  
};
var myLineChart = new Chart(canvas,{
  type:'line',
	data:data,
  options:option
});


  
var dl = document.createElement('a');
dl.href = myLineChart.toBase64Image();
dl.download = `Comparison_{{ country.name }}_{{ country2.name }}.png` //'my_file_name.png';
  


// Trigger the download

  </script>
</div>
<br/>
<button type=button style="background: #002432; color: white" class="btn" id='link' onclick="dl.click()">Save as png</button>
{% endblock %}